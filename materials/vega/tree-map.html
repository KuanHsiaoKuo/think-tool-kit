<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.8"></script>
</head>
<body>
  <div id="vis"/>
  <script>
    const spec = {
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "description": "An example of treemap layout for hierarchical data.",
  "width": 960,
  "height": 500,
  "padding": 2.5,
  "autosize": "none",
  "signals": [
    {
      "name": "layout",
      "value": "squarify",
      "bind": {
        "input": "select",
        "options": ["squarify", "binary", "slicedice"]
      }
    },
    {
      "name": "aspectRatio",
      "value": 1.6,
      "bind": {"input": "range", "min": 1, "max": 5, "step": 0.1}
    }
  ],
  "data": [
    {
      "name": "tree",
      // "url": "flare.json",
      "url": "https://vega.github.io/editor/data/flare.json",
      "transform": [
        {"type": "stratify", "key": "id", "parentKey": "parent"},
        {
          "type": "treemap",
          "field": "size",
          "sort": {"field": "value"},
          "round": true,
          "method": {"signal": "layout"},
          "ratio": {"signal": "aspectRatio"},
          "size": [{"signal": "width"}, {"signal": "height"}]
        }
      ]
    },
    {
      "name": "nodes",
      "source": "tree",
      "transform": [{"type": "filter", "expr": "datum.children"}]
    },
    {
      "name": "leaves",
      "source": "tree",
      "transform": [{"type": "filter", "expr": "!datum.children"}]
    }
  ],
  "scales": [
    {
      "name": "color",
      "type": "ordinal",
      "domain": {"data": "nodes", "field": "name"},
      "range": [
        "#3182bd",
        "#6baed6",
        "#9ecae1",
        "#c6dbef",
        "#e6550d",
        "#fd8d3c",
        "#fdae6b",
        "#fdd0a2",
        "#31a354",
        "#74c476",
        "#a1d99b",
        "#c7e9c0",
        "#756bb1",
        "#9e9ac8",
        "#bcbddc",
        "#dadaeb",
        "#636363",
        "#969696",
        "#bdbdbd",
        "#d9d9d9"
      ]
    },
    {
      "name": "size",
      "type": "ordinal",
      "domain": [0, 1, 2, 3],
      "range": [256, 28, 20, 14]
    },
    {
      "name": "opacity",
      "type": "ordinal",
      "domain": [0, 1, 2, 3],
      "range": [0.15, 0.5, 0.8, 1]
    }
  ],
  "marks": [
    {
      "type": "rect",
      "from": {"data": "nodes"},
      "interactive": false,
      "encode": {
        "enter": {"fill": {"scale": "color", "field": "name"}},
        "update": {
          "x": {"field": "x0"},
          "y": {"field": "y0"},
          "x2": {"field": "x1"},
          "y2": {"field": "y1"}
        }
      }
    },
    {
      "type": "rect",
      "from": {"data": "leaves"},
      "encode": {
        "enter": {"stroke": {"value": "#fff"}},
        "update": {
          "x": {"field": "x0"},
          "y": {"field": "y0"},
          "x2": {"field": "x1"},
          "y2": {"field": "y1"},
          "fill": {"value": "transparent"}
        },
        "hover": {"fill": {"value": "red"}}
      }
    },
    {
      "type": "text",
      "from": {"data": "nodes"},
      "interactive": false,
      "encode": {
        "enter": {
          "font": {"value": "Helvetica Neue, Arial"},
          "align": {"value": "center"},
          "baseline": {"value": "middle"},
          "fill": {"value": "#000"},
          "text": {"field": "name"},
          "fontSize": {"scale": "size", "field": "depth"},
          "fillOpacity": {"scale": "opacity", "field": "depth"}
        },
        "update": {
          "x": {"signal": "0.5 * (datum.x0 + datum.x1)"},
          "y": {"signal": "0.5 * (datum.y0 + datum.y1)"}
        }
      }
    }
  ],
  "config": {
    "background": "#FFFFFF",
    "title": {"anchor": "start", "fontSize": 18, "font": "Lato"},
    "axisX": {
      "domain": true,
      "domainColor": "#000000",
      "domainWidth": 1,
      "grid": false,
      "labelFontSize": 12,
      "labelFont": "Lato",
      "labelAngle": 0,
      "tickColor": "#000000",
      "tickSize": 5,
      "titleFontSize": 12,
      "titlePadding": 10,
      "titleFont": "Lato"
    },
    "axisY": {
      "domain": false,
      "domainWidth": 1,
      "grid": true,
      "gridColor": "#DEDDDD",
      "gridWidth": 1,
      "labelFontSize": 12,
      "labelFont": "Lato",
      "labelPadding": 8,
      "ticks": false,
      "titleFontSize": 12,
      "titlePadding": 10,
      "titleFont": "Lato",
      "titleAngle": 0,
      "titleY": -10,
      "titleX": 18
    },
    "legend": {
      "labelFontSize": 12,
      "labelFont": "Lato",
      "symbolSize": 100,
      "titleFontSize": 12,
      "titlePadding": 10,
      "titleFont": "Lato",
      "orient": "right",
      "offset": 10
    },
    "view": {"stroke": "transparent"},
    "range": {
      "category": [
        "#1696d2",
        "#ec008b",
        "#fdbf11",
        "#000000",
        "#d2d2d2",
        "#55b748"
      ],
      "diverging": [
        "#ca5800",
        "#fdbf11",
        "#fdd870",
        "#fff2cf",
        "#cfe8f3",
        "#73bfe2",
        "#1696d2",
        "#0a4c6a"
      ],
      "heatmap": [
        "#ca5800",
        "#fdbf11",
        "#fdd870",
        "#fff2cf",
        "#cfe8f3",
        "#73bfe2",
        "#1696d2",
        "#0a4c6a"
      ],
      "ordinal": [
        "#cfe8f3",
        "#a2d4ec",
        "#73bfe2",
        "#46abdb",
        "#1696d2",
        "#12719e"
      ],
      "ramp": [
        "#CFE8F3",
        "#A2D4EC",
        "#73BFE2",
        "#46ABDB",
        "#1696D2",
        "#12719E",
        "#0A4C6A",
        "#062635"
      ]
    },
    "area": {"fill": "#1696d2"},
    "rect": {"fill": "#1696d2"},
    "line": {"color": "#1696d2", "stroke": "#1696d2", "strokeWidth": 5},
    "trail": {
      "color": "#1696d2",
      "stroke": "#1696d2",
      "strokeWidth": 0,
      "size": 1
    },
    "path": {"stroke": "#1696d2", "strokeWidth": 0.5},
    "point": {"filled": true},
    "text": {
      "font": "Lato",
      "color": "#1696d2",
      "fontSize": 11,
      "align": "center",
      "fontWeight": 400,
      "size": 11
    },
    "style": {"bar": {"fill": "#1696d2", "stroke": null}},
    "arc": {"fill": "#1696d2"},
    "shape": {"stroke": "#1696d2"},
    "symbol": {"fill": "#1696d2", "size": 30}
  }
};
    vegaEmbed("#vis", spec, {mode: "vega"}).then(console.log).catch(console.warn);
  </script>
</body>
</html>